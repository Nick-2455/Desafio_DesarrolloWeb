<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agregar Proveedor</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

</head>
<body class="d-flex">

    <aside class="bg-dark text-white p-2 vh-100 position-fixed d-flex flex-column align-items-center">
        <a href="../index.html">
            
            <img src="../images/logo.png" alt="Logo" class="mb-3" width="80">
        </a>
        <nav class="nav flex-column">
            <a class="nav-link text-white" href="agregar.html"><h2>âž•</h2></a>
            <a class="nav-link text-white" href="lista.html"><h2>ðŸ“„</h2></a>
            <a class="nav-link text-white" href="#perfil"><h2>ðŸ‘¤</h2></a>
        </nav>
    </aside>

<article class="container fluid" style="margin-left: 100px;">
    <h2 class="mb-3">Agregar Proveedor</h2>
    <p class="mb-4">Inserte la informaciÃ³n del proveedor.</p>

    <form id="proveedorForm" class="row g-3">
        <div class="col-12">
            <label for="imagen" class="form-label">Imagen</label>
            <input type="file" class="form-control" id="imagen">
        </div>

        <div class="col-md-6">
            <label for="id" class="form-label">Id</label>
            <input type="text" class="form-control" id="id">
        </div>

        <div class="col-md-6">
            <label for="nombre" class="form-label">Nombre del proveedor</label>
            <input type="text" class="form-control" id="nombre">
        </div>

        <div class="col-md-6">
            <label for="insumos" class="form-label">Insumos que reparten</label>
            <input type="text" class="form-control" id="insumos">
        </div>

        <div class="col-md-6">
            <label for="precio" class="form-label">Precio</label>
            <input type="text" class="form-control" id="precio">
        </div>

        <div class="col-md-6">
            <label for="telefono" class="form-label">TelÃ©fono</label>
            <input type="text" class="form-control" id="telefono">
        </div>

        <div class="col-md-6">
            <label for="correo" class="form-label">Correo</label>
            <input type="email" class="form-control" id="correo">
        </div>

        <div class="col-12 d-flex gap-2">
            <button type="submit" class="btn btn-success">Agregar proveedor</button>
            <button type="button" class="btn btn-danger" id="cancelar">Cancelar</button>
        </div>
    </form>
</article>

<script>
    const form = document.getElementById("proveedorForm");
    const apiURL = "https://mockapi.io/clone/67dcbd0de00db03c4068c5a9/proveedores"; 

    form.addEventListener("submit", (e) => {
        e.preventDefault();

        const proveedor = {
            imagen: document.getElementById("imagen").value, // Puedes usar un link o input tipo URL para facilitarlo
            id: document.getElementById("id").value,
            nombre: document.getElementById("nombre").value,
            insumos: document.getElementById("insumos").value,
            precio: document.getElementById("precio").value,
            telefono: document.getElementById("telefono").value,
            correo: document.getElementById("correo").value
        };

        fetch(apiURL, {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(proveedor)
        })
        .then(response => {
            if (!response.ok) {
                throw new Error("Error al guardar proveedor");
            }
            alert("âœ… Proveedor agregado correctamente");
            window.location.href = "lista.html";
        })
        .catch(error => {
            alert("âŒ No se pudo agregar el proveedor.");
            console.error(error);
        });
    });

    // BotÃ³n cancelar
    document.getElementById("cancelar").addEventListener("click", () => {
        window.location.href = "lista.html";
    });
</script>

</body>
</html>
